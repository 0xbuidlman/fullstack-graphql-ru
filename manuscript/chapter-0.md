# Предисловие

GraphQL — революционное решение в клиент-серверном взаимодействии. Эта технология позволяет лучше документировать API, облегчает управление данными в HTTP-клиентах и оптимизирует использование сети.

Одно из основных преимуществ GraphQL — улучшение контакта между API и его пользователями. Кроме этого, технология позволяет улучшить работу в команде разработчиков, предоставляя им информацию о методах API. Он также обеспечивает лучшее взаимодействие со сторонними пользователями API, поскольку сервисам GraphQL не требуется конфигурация для API-документации.

Учитывая вышесказанное, GraphQL расширяет возможности клиентов, давая им полный контроль над получением данных. GraphQL позволяет клиентам запрашивать только те данные, которые им нужны, — ни больше ни меньше. Технология также предоставляет возможность запрашивать и вложенные данные, используя один запрос и избегая нескольких простых запросов, как это принято в RESTful API. REST порождает тенденцию к сложности использования API для клиентов.

Как следствие, GraphQL оптимизирует использование сети за счёт уменьшения отправляемых данных и количества HTTP-запросов. Данное преимущество особенно заметно на мобильных клиентах, где интернет-трафик играет важную роль.

## Итак, что же такое GraphQL?

GraphQL — типизированный предметно-ориентированный язык для проектирования и запросов данных.

Предметно-ориентированный язык или DSL — это язык, созданный для единственной предметной области приложения; он противоположен языкам общего назначения, таким как JavaScript, Ruby, Python или C, которые применяются для решения самых разных задач. В настоящее время существует множество популярных DSL: CSS — это DSL для оформления (стилизации), а HTML — это DSL для разметки. И вот GraphQL — это DSL для данных.

GraphQL — типизированный язык, а это значит, что он использует типы для определения ресурсов, добавляет типы в поля каждого ресурса. Он также использует типы для статической проверки ошибок. Как упоминалось, это типизированный язык, поэтому он является источником самых больших достоинств GraphQL, таких как автоматическая интроспекция API и документация.

Предметная область GraphQL — это данные. Он может использоваться для разработки схемы, представляющей данные, а также для запроса определённых полей данных.

Разработка серверов и клиентов API — основной вариант использования GraphQL. Бэкенд-разработчики могут использовать GraphQL для моделирования своих данных, в то время как фронтенд-разработчики могут использовать GraphQL для формулирования запросов на получения определённых частей данных.

Даже несмотря на то, что сервисы обычно включают GraphQL через HTTP-уровень, тем не менее GraphQL не привязан строго к HTTP или какому-либо другому протоколу передачи данных.

В конце концов, GraphQL — это спецификация. Это означает, как он должен работать, позволяя любому реализовать его на любом языке программирования. Существует официальная реализация на JavaScript под названием `graphql-js`, но есть также множество других реализаций на разных языках программирования, таких как Ruby, Elixir и т.д.

## Организация книги

В этой книге вы узнаете, как с нуля разработать готовое клиент-серверное приложение, использующее GraphQL. Вы научитесь получать данные от клиента, проектировать эти данные на сервере, разрабатывать GraphQL-серверы на Node.js и, наконец, как создавать клиенты на React с использованием GraphQL.

Первые две главы покажут, как получать данные с помощью GraphQL. В первой главе вы познакомитесь с тем, как создавать данные. Во второй главе изучите, как проектировать схемы. Вы узнаете эти чистые концепции GraphQL, не задумываясь про серверы или клиенты HTTP. GraphQL — это абстракция, позволяющая думать о данных, не беспокоясь о том, как они будут передаваться. Вы создадите схему, запросы и мутации с помощью JavaScript и нескольких библиотек GraphQL.

Остальные главы будут посвящены созданию серверов и клиентов GraphQL.

В третьей главе, API GraphQL, вы узнаете, как создавать HTTP-серверы GraphQL с использованием серверов Node.js и Apollo. Вы сделаете доступной GraphQL-схему через HTTP, подключитесь к базе данных, реализуете аутентификацию и авторизацию, а также узнаете, как лучше организовать файловую структуру.

В четвёртой главе, Клиенты GraphQL, вы научитесь разрабатывать GraphQL-клиенты с помощью клиента React и Apollo. Вы узнаете, как запрашивать и создавать данные с использованием Apollo-компонентов `Query` и `Mutation`, а также как обрабатывать аутентификацию.

В пятой главе вы освоите добавление функциональности, работающей в режиме реального времени к вашим приложениям GraphQL с помощью подписок. Подписки предоставляют API-интерфейсам GraphQL возможность передавать данные клиентам.

Наконец, в шестой главе вы познакомитесь с тестированием API и GraphQL-клиентов.

## Пример приложения

В ходе этой книги вы узнаете, как создать клон сервииса Pinterest под названием Pinapp с использованием GraphQL, Node.js, React и Apollo-клиента.

Для Pinapp определены следующие требования:

* Вход с помощью магических ссылок
* Выход из приложения
* Добавление пина (изображения со ссылкой на URL-адрес)
* Возможность поиска пинов и пользователей
* Просмотр списка пинов
* Просмотр новых пинов без обновления браузера

Вы создадите это приложение слоями. Начнёте со слоя данных, затем напишите бизнес-логику, после чего перейдёте к транспортному уровню HTTP, а затем соедините всё это с уровнем базы данных и, наконец, реализуете HTTP-клиент.

## Окружение для разработки

Нет никаких требований к окружению, чтобы посмотреть вживую примеры из этой книги, кроме наличия браузера и подключения к интернету. На каждом шаге приложения есть работающая и доступна для клонирования онлайн-версия на glitch.com. Glitch — потрясающий сервис для создания приложений, созданное людьми, которые разработали Stack Overflow и Trello.
